<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Caja Mercado Limpio ‚Äî Terminal Laura</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles-laura.css" />
</head>
<body>

  <div id="toast" class="toast hidden">
    <div class="toast-content" id="toast-content">Notificaci√≥n</div>
  </div>

  <header class="app-header">
    <div>
      <h1>Mercado Limpio</h1>
      <p class="subtitle">Terminal de Caja ¬∑ Operadora Laura</p>
    </div>
    <div class="header-status">
      <div id="header-date" style="font-weight: 700; color:var(--accent);"></div>
      <div id="header-time" style="opacity: 0.7;"></div>
    </div>
  </header>

  <main class="app-main">

    <aside class="left-panel">
      <div class="card main-balance-card">
        <h2 style="margin:0 0 10px 0; font-size:0.9rem; text-transform:uppercase; color:var(--text-muted);">Efectivo en Caja</h2>
        <div class="balance-main">
          <span class="value mono" id="saldo-efectivo">$ 0,00</span>
        </div>
        
        <div class="balance-row">
          <div class="balance-chip">
            <span class="chip-label">Cheques</span>
            <span class="chip-value mono" id="saldo-cheques">$ 0</span>
          </div>
          <div class="balance-chip">
            <span class="chip-label">Banco</span>
            <span class="chip-value mono" id="saldo-banco">$ 0</span>
          </div>
          <div class="balance-chip total-chip">
            <span class="chip-label">Total Activos</span>
            <span class="chip-value mono" id="saldo-total">$ 0</span>
          </div>
        </div>
      </div>

      <div class="card movements-card">
        <div class="card-header-movs">
          <h2 style="margin:0; font-size:1rem; color:#fff;">√öltimos Movimientos</h2>
          <div style="display:flex; align-items:center; gap:10px;">
            <span id="movimientos-dia-resumen" style="font-size:0.75rem; color:var(--text-muted);"></span>
            <input type="date" id="movimientos-fecha" class="date-selector" />
          </div>
        </div>
        
        <div id="movimientos-list" class="movimientos-list">
          <div style="text-align:center; padding:20px; color:var(--text-muted);">Cargando datos...</div>
        </div>
      </div>
    </aside>

    <section class="right-panel">

      <div id="view-movimiento" class="view active">
        <div class="card form-card">
          <h2 style="color:var(--accent); margin-bottom:20px; border-bottom:1px solid var(--border-glass); padding-bottom:10px;">Nuevo Movimiento</h2>
          
          <form id="form-movimiento" class="form-grid">
            <div class="form-row two-cols">
              <div>
                <label>Tipo</label>
                <select id="tipoMovimiento"><option value="Ingreso">Ingreso (+)</option><option value="Egreso">Egreso (-)</option></select>
              </div>
              <div>
                <label>Pago</label>
                <select id="formaPago"><option value="Efectivo">Efectivo</option><option value="Cheque">Cheque</option><option value="Banco">Banco</option></select>
              </div>
            </div>

            <div>
              <label>Concepto R√°pido</label>
              <select id="tipoRapido">
                <option value="libre">Movimiento General</option>
                <option value="pagoProveedor">Pago a Proveedor</option>
                <option value="combustible">Carga Combustible</option>
                <option value="adelanto">Adelanto Sueldo</option>
                <option value="haber">Pago Haberes</option>
              </select>
            </div>

            <div id="row-proveedor" class="hidden dynamic-row">
              <label>Proveedor</label>
              <input type="text" id="inputProveedor" placeholder="Buscar proveedor..." />
              <div id="proveedor-suggestions" class="suggestions"></div>
            </div>
            <div id="row-vehiculo" class="hidden dynamic-row">
              <label>Veh√≠culo</label>
              <select id="selectVehiculo"></select>
            </div>
            <div id="row-empleado" class="hidden dynamic-row">
              <label>Empleado</label>
              <select id="selectEmpleado"></select>
            </div>
            <div id="row-banco-cheque" class="hidden two-cols">
              <div><label>Banco</label><input type="text" id="banco"></div>
              <div><label>N¬∞ Cheque</label><input type="text" id="nroCheque"></div>
            </div>

            <div>
              <label>Monto</label>
              <input type="text" id="importe" placeholder="$ 0" class="big-input" required />
            </div>

            <div>
              <label>Nota</label>
              <textarea id="observacion" rows="2" placeholder="Detalle opcional..."></textarea>
            </div>

            <button type="submit" id="btn-registrar-mov" class="btn-primary">Registrar</button>
          </form>
        </div>
      </div>

      <div id="view-rendicion" class="view">
        <div class="rendicion-hero">
          <div class="fun-balance-bar">
            <div>
              <div class="fun-label">Saldos Sistema</div>
              <div style="font-size:0.9rem; opacity:0.7;">
                 <span id="rendicion-fecha"></span> | <span id="rendicion-turno"></span>
              </div>
            </div>
            <div style="text-align:right;">
               <div class="fun-label" style="font-size:0.8rem;">REPARTIDOR: <span id="rendicion-repartidor" style="color:var(--accent);">--</span></div>
               <div class="fun-value mono" id="rendicion-saldo-actual" style="font-size:1.5rem;">$ 0,00</div>
            </div>
          </div>

          <div id="bill-counter-container" style="flex:1; display:flex; flex-direction:column;"></div>

          <div class="rendicion-footer">
            <div class="summary-box">
              <h3>Esperado (Seg√∫n App Reparto)</h3>
              <div class="val" id="rendicion-esperado">$ 0</div>
            </div>
            <div class="summary-box real">
              <h3>Contado (En Mano)</h3>
              <input type="text" id="rendicion-contado" readonly class="summary-input-clean" placeholder="$ 0" />
            </div>
          </div>
          
          <div id="resultado-rendicion" style="text-align:center; min-height:20px; font-weight:bold;"></div>

          <button id="btn-procesar-rendicion" class="btn-primary" style="background:var(--ok); color:#000;">
            CONFIRMAR Y PROCESAR
          </button>
        </div>
      </div>

      <div id="view-arqueo" class="view">
        <div class="card form-card">
          <h2 style="color:var(--accent); margin-bottom:20px; border-bottom:1px solid var(--border-glass); padding-bottom:10px;">Cierre y Arqueo</h2>
          
          <div style="background:rgba(255,255,255,0.05); padding:20px; border-radius:15px; text-align:center; margin-bottom:20px;">
            <div style="color:var(--text-muted); font-size:0.9rem; text-transform:uppercase;">Saldo Te√≥rico Sistema</div>
            <div class="mono" id="arqueo-sistema" style="font-size:2.5rem; font-weight:700; color:#fff;">$ 0,00</div>
          </div>

          <div style="margin-bottom:20px;">
            <label style="font-size:1rem; color:var(--accent);">EFECTIVO F√çSICO (Contado)</label>
            <input type="text" id="arqueo-fisico" placeholder="$ 0" class="big-input" style="font-size:3rem; padding:20px;" />
          </div>

          <div id="resultado-arqueo" style="text-align:center; margin-bottom:20px; font-weight:600; font-size:1.1rem; color:var(--text-muted);">
            Ingrese valor para comparar...
          </div>

          <button id="btn-registrar-arqueo" class="btn-primary" style="background:var(--danger); color:#fff;">
            CERRAR ARQUEO
          </button>
        </div>
      </div>

    </section>
  </main>

  <nav class="bottom-nav">
    <button class="nav-btn active" data-view="view-movimiento">
      üì• Movimiento
    </button>
    <button class="nav-btn" data-view="view-rendicion">
      üíµ Rendici√≥n
    </button>
    <button class="nav-btn" data-view="view-arqueo">
      üîí Arqueo
    </button>
  </nav>

  <script src="cajamlapp.js"></script>
</body>
</html>

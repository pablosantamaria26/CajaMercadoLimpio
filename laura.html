<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Caja Mercado Limpio</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <meta name="theme-color" content="#1565C0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>

    <header class="app-header">
        <div class="header-content">
            <h1 id="page-title">Caja Central</h1>
            <div class="clock-container">
                <span id="header-time">00:00</span>
                <span id="header-date">...</span>
            </div>
        </div>
        <div class="resumen-caja-header">
            <div class="chip">游눳 <span id="saldo-total">Cargando...</span></div>
        </div>
    </header>

    <main id="main-container">

        <section id="view-movimientos" class="view-section active">
            <div class="card form-card">
                <h3>Nuevo Movimiento</h3>
                <form id="form-movimiento">
                    <div class="input-group">
                        <select id="tipoMovimiento" class="anim-input">
                            <option value="Ingreso">Ingreso (+)</option>
                            <option value="Egreso" selected>Egreso (-)</option>
                        </select>
                        <select id="formaPago" class="anim-input">
                            <option value="Efectivo">Efectivo</option>
                            <option value="Cheque">Cheque</option>
                            <option value="Banco">Banco</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <select id="tipoRapido" class="anim-input full-width">
                            <option value="" disabled selected>-- Seleccionar Concepto --</option>
                            <option value="varios">Varios / Manual</option>
                            <option value="pagoProveedor">Pago Proveedor</option>
                            <option value="combustible">Combustible</option>
                            <option value="adelanto">Adelanto Sueldo</option>
                            <option value="haber">Pago Haberes</option>
                            <option value="movimientoLibre">Movimiento Libre (Retiro)</option>
                        </select>
                    </div>

                    <div id="row-proveedor" class="hidden-row">
                        <input type="text" id="inputProveedor" placeholder="Buscar Proveedor..." class="anim-input full-width">
                        <div id="proveedor-suggestions" class="autocomplete-list"></div>
                    </div>
                    
                    <div id="row-vehiculo" class="hidden-row">
                        <select id="selectVehiculo" class="anim-input full-width"><option value="">Seleccionar Veh칤culo</option></select>
                    </div>

                    <div id="row-empleado" class="hidden-row">
                        <select id="selectEmpleado" class="anim-input full-width"><option value="">Seleccionar Empleado</option></select>
                    </div>

                    <div class="input-amount-wrapper">
                        <span class="currency-symbol">$</span>
                        <input type="tel" id="importe" placeholder="0.00" class="anim-input huge-input" autocomplete="off">
                    </div>

                    <textarea id="observacion" rows="2" placeholder="Observaci칩n (opcional)" class="anim-input full-width"></textarea>

                    <button type="submit" id="btn-registrar-mov" class="btn-action btn-bounce">
                        <span class="material-icons-round">save</span> REGISTRAR
                    </button>
                </form>
            </div>

            <div class="card list-card">
                <div class="list-header">
                    <h3>Historial Hoy</h3>
                    <input type="date" id="movimientos-fecha" class="small-date-input">
                </div>
                <div id="movimientos-list" class="scroll-list">
                    </div>
            </div>
        </section>


        <section id="view-rendicion" class="view-section">
            <div class="hero-status">
                <div class="status-info">
                    <small>Buscando planilla de:</small>
                    <h2 id="rendicion-repartidor">---</h2>
                    <span class="badge" id="rendicion-turno">---</span>
                    <span class="badge-date" id="rendicion-fecha">---</span>
                </div>
                <div class="status-amount">
                    <small>Esperado</small>
                    <div id="rendicion-esperado" class="amount-display">$ 0</div>
                </div>
            </div>

            <div class="card counter-card">
                <h3>Contador de Billetes</h3>
                <div id="bill-counter-container" class="grid-billetes">
                    </div>
                
                <div class="total-bar">
                    <span>Total Contado:</span>
                    <input type="text" id="rendicion-contado" readonly value="$ 0,00" data-numeric="0">
                </div>

                <div id="resultado-rendicion" class="result-box"></div>

                <button id="btn-procesar-rendicion" class="btn-action btn-bounce btn-success">
                    <span class="material-icons-round">check_circle</span> PROCESAR RENDICI칍N
                </button>
                <br>
                <button onclick="resetBillCounter()" class="btn-text">Borrar todo</button>
            </div>
        </section>


        <section id="view-arqueo" class="view-section">
            <div class="card audit-card">
                <div class="audit-header">
                    <span class="material-icons-round big-icon">point_of_sale</span>
                    <h2>Arqueo de Caja</h2>
                    <p>Verificaci칩n de efectivo f칤sico vs sistema</p>
                </div>

                <div class="audit-row">
                    <span>Sistema dice:</span>
                    <strong id="arqueo-sistema">$ 0,00</strong>
                </div>

                <div class="audit-input-wrapper">
                    <label>쮺u치nto hay en la caja real?</label>
                    <div class="input-amount-wrapper">
                        <span class="currency-symbol">$</span>
                        <input type="tel" id="arqueo-fisico" placeholder="0.00" class="anim-input huge-input">
                    </div>
                </div>

                <div id="resultado-arqueo" class="result-box"></div>

                <button id="btn-registrar-arqueo" class="btn-action btn-bounce btn-warning">
                    <span class="material-icons-round">verified_user</span> CONFIRMAR ARQUEO
                </button>
            </div>
        </section>

    </main>

    <div id="toast" class="toast-msg">Mensaje</div>

    <nav class="bottom-nav">
        <button class="nav-btn active" data-target="view-movimientos" data-theme="theme-blue">
            <span class="material-icons-round">swap_horiz</span>
            <span class="nav-label">Caja</span>
        </button>
        <button class="nav-btn" data-target="view-rendicion" data-theme="theme-green">
            <span class="material-icons-round">assignment_turned_in</span>
            <span class="nav-label">Rendici칩n</span>
        </button>
        <button class="nav-btn" data-target="view-arqueo" data-theme="theme-orange">
            <span class="material-icons-round">inventory</span>
            <span class="nav-label">Arqueo</span>
        </button>
    </nav>

    <script src="app.js"></script>
</body>
</html>

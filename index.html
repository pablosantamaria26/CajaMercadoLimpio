<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Caja Mercado Limpio – Terminal Operativa</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fuentes -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet" />

  <!-- Estilos -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <!-- Barra superior -->
    <header class="top-bar glass">
      <div class="top-bar-left">
        <div class="app-title">Caja Mercado Limpio</div>
        <div class="app-subtitle">Terminal Operativa · Laura</div>
      </div>
      <div class="top-bar-right">
        <span id="fecha-hoy" class="pill pill-soft"></span>
        <span id="turno-actual" class="pill pill-accent"></span>
      </div>
    </header>

    <!-- Layout principal -->
    <main class="main-layout">
      <!-- Panel izquierdo: Saldos y info rápida -->
      <section class="panel panel-saldos glass">
        <h2 class="panel-title">Estado de Caja</h2>

        <div class="saldos-grid">
          <div class="saldo-card saldo-efectivo">
            <div class="saldo-label">Efectivo</div>
            <div id="saldo-efectivo" class="saldo-valor">–</div>
          </div>
          <div class="saldo-card saldo-cheques">
            <div class="saldo-label">Cheques</div>
            <div id="saldo-cheques" class="saldo-valor">–</div>
          </div>
          <div class="saldo-card saldo-banco">
            <div class="saldo-label">Banco</div>
            <div id="saldo-banco" class="saldo-valor">–</div>
          </div>
          <div class="saldo-card saldo-total">
            <div class="saldo-label">Total</div>
            <div id="saldo-total" class="saldo-valor">–</div>
          </div>
        </div>

        <div class="saldos-actions">
          <button id="btn-actualizar-estado" class="btn btn-outline">
            Actualizar estado
          </button>
        </div>

        <div class="panel-subtitle">Últimos movimientos (vista rápida)</div>
        <div id="lista-movimientos-dia" class="movimientos-dia">
          <div class="mov-vacio">Sin movimientos cargados todavía.</div>
        </div>
      </section>

      <!-- Panel derecho: Tabs de operación -->
      <section class="panel panel-operaciones glass">
        <!-- Tabs -->
        <div class="tabs">
          <button class="tab active" data-tab="tab-movimientos">Movimientos</button>
          <button class="tab" data-tab="tab-rendicion">Contador & Rendición</button>
          <button class="tab" data-tab="tab-arqueo">Arqueo</button>
        </div>

        <!-- Contenido Tabs -->
        <div class="tabs-content">

          <!-- TAB 1: Movimientos -->
          <div id="tab-movimientos" class="tab-panel active">
            <h2 class="panel-title">Registrar movimiento</h2>

            <div class="acciones-grid">
              <button class="action-card" data-action="proveedor">
                <span class="action-title">Pago a proveedor</span>
                <span class="action-desc">Maqe, Romyl, Fibran, Cotton, etc.</span>
              </button>
              <button class="action-card" data-action="combustible">
                <span class="action-title">Combustible</span>
                <span class="action-desc">Hiace / Saveiro / Uno Cargo</span>
              </button>
              <button class="action-card" data-action="adelanto">
                <span class="action-title">Adelanto</span>
                <span class="action-desc">Adelantos a empleados</span>
              </button>
              <button class="action-card" data-action="haberes">
                <span class="action-title">Pago de haberes</span>
                <span class="action-desc">Sueldos del equipo</span>
              </button>
              <button class="action-card" data-action="libre">
                <span class="action-title">Movimiento libre</span>
                <span class="action-desc">Descripción personalizada</span>
              </button>
            </div>
          </div>

          <!-- TAB 2: Contador & Rendición -->
          <div id="tab-rendicion" class="tab-panel">
            <h2 class="panel-title">Contador de billetes & Rendición</h2>

            <!-- Datos de rendición -->
            <div class="rendicion-top">
              <div class="form-group">
                <label for="select-repartidor">Repartidor</label>
                <select id="select-repartidor" class="input">
                  <option value="Nico">Nico</option>
                  <!-- futuro: otros repartidores -->
                </select>
              </div>
              <div class="form-group">
                <label for="select-turno">Turno</label>
                <select id="select-turno" class="input">
                  <option value="Mañana">Mañana</option>
                  <option value="Tarde">Tarde</option>
                </select>
              </div>
              <div class="form-group">
                <label for="fecha-rendicion">Fecha</label>
                <input id="fecha-rendicion" type="date" class="input" />
              </div>
              <div class="form-group form-group-inline">
                <button id="btn-cargar-esperado" class="btn btn-outline">
                  Obtener esperado
                </button>
              </div>
            </div>

            <!-- Resumen esperado vs contado -->
            <div class="rendicion-resumen glass-soft">
              <div class="resumen-item">
                <span class="resumen-label">Efectivo esperado</span>
                <span id="rend-efectivo-esperado" class="resumen-valor">–</span>
              </div>
              <div class="resumen-item">
                <span class="resumen-label">Efectivo contado</span>
                <span id="rend-efectivo-contado" class="resumen-valor mono">$0</span>
              </div>
              <div class="resumen-item">
                <span class="resumen-label">Diferencia</span>
                <span id="rend-diferencia" class="resumen-valor resumen-dif">–</span>
              </div>
              <div class="resumen-item">
                <span class="resumen-label">Estado</span>
                <span id="rend-estado" class="resumen-estado pill pill-soft">–</span>
              </div>
            </div>

            <!-- Contador de billetes -->
            <div class="contador-billetes glass-soft">
              <div class="contador-header">
                <h3>Contador de billetes</h3>
                <div class="contador-actions">
                  <button id="btn-limpiar-contador" class="btn btn-text">Limpiar</button>
                </div>
              </div>

              <div class="denoms-grid">
                <!-- Cada fila: valor + input cantidad + total línea -->
                <div class="denom-row" data-valor="1000">
                  <div class="denom-label mono">$1.000</div>
                  <input type="number" min="0" class="input input-denom" data-tipo="cantidad" placeholder="0" />
                  <div class="denom-total mono" data-role="total-linea">$0</div>
                </div>
                <div class="denom-row" data-valor="2000">
                  <div class="denom-label mono">$2.000</div>
                  <input type="number" min="0" class="input input-denom" data-tipo="cantidad" placeholder="0" />
                  <div class="denom-total mono" data-role="total-linea">$0</div>
                </div>
                <div class="denom-row" data-valor="5000">
                  <div class="denom-label mono">$5.000</div>
                  <input type="number" min="0" class="input input-denom" data-tipo="cantidad" placeholder="0" />
                  <div class="denom-total mono" data-role="total-linea">$0</div>
                </div>
                <div class="denom-row" data-valor="10000">
                  <div class="denom-label mono">$10.000</div>
                  <input type="number" min="0" class="input input-denom" data-tipo="cantidad" placeholder="0" />
                  <div class="denom-total mono" data-role="total-linea">$0</div>
                </div>
                <div class="denom-row" data-valor="20000">
                  <div class="denom-label mono">$20.000</div>
                  <input type="number" min="0" class="input input-denom" data-tipo="cantidad" placeholder="0" />
                  <div class="denom-total mono" data-role="total-linea">$0</div>
                </div>
              </div>

              <div class="contador-total-box">
                <span class="contador-total-label">Total contado</span>
                <span id="contador-total" class="contador-total-valor mono">$0</span>
              </div>

              <div class="contador-footer">
                <button id="btn-procesar-rendicion" class="btn btn-primary">
                  Cargar rendición
                </button>
              </div>
            </div>
          </div>

          <!-- TAB 3: Arqueo -->
          <div id="tab-arqueo" class="tab-panel">
            <h2 class="panel-title">Arqueo de caja</h2>

            <div class="arqueo-box glass-soft">
              <div class="arqueo-row">
                <span class="arqueo-label">Efectivo según sistema</span>
                <span id="arqueo-efectivo-sistema" class="arqueo-valor mono">–</span>
              </div>

              <div class="arqueo-row">
                <label for="arqueo-efectivo-fisico" class="arqueo-label">Efectivo físico contado</label>
                <input id="arqueo-efectivo-fisico" type="number" min="0" class="input" placeholder="0" />
              </div>

              <div class="arqueo-row">
                <span class="arqueo-label">Diferencia</span>
                <span id="arqueo-diferencia" class="arqueo-valor mono">–</span>
              </div>

              <div class="arqueo-row">
                <span class="arqueo-label">Resultado</span>
                <span id="arqueo-resultado" class="pill pill-soft">–</span>
              </div>

              <div class="arqueo-actions">
                <button id="btn-calcular-arqueo" class="btn btn-outline">Calcular</button>
                <button id="btn-registrar-arqueo" class="btn btn-primary">Registrar arqueo</button>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Modal de movimiento -->
    <div id="modal-movimiento" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content glass">
        <div class="modal-header">
          <h3 id="modal-mov-title">Nuevo movimiento</h3>
          <button id="modal-mov-close" class="btn-icon" aria-label="Cerrar">✕</button>
        </div>
        <div class="modal-body">
          <form id="form-movimiento">
            <input type="hidden" id="mov-tipo" />
            <input type="hidden" id="mov-categoria" />

            <div class="form-group">
              <label for="mov-tipo-operacion">Tipo</label>
              <input id="mov-tipo-operacion" class="input" type="text" readonly />
            </div>

            <div class="form-group">
              <label for="mov-forma-pago">Forma de pago</label>
              <select id="mov-forma-pago" class="input">
                <option value="Efectivo">Efectivo</option>
                <option value="Cheque">Cheque</option>
                <option value="Banco">Banco</option>
              </select>
            </div>

            <div class="form-group" data-field="proveedor" style="display:none;">
              <label for="mov-proveedor">Proveedor</label>
              <select id="mov-proveedor" class="input">
                <option value="">Seleccionar proveedor</option>
                <option value="Maqe">Maqe</option>
                <option value="Romyl">Romyl</option>
                <option value="Fibran">Fibran</option>
                <option value="Cotton">Cotton</option>
                <option value="Otro">Otro (escribir en obs.)</option>
              </select>
            </div>

            <div class="form-group" data-field="vehiculo" style="display:none;">
              <label for="mov-vehiculo">Vehículo</label>
              <select id="mov-vehiculo" class="input">
                <option value="">Seleccionar vehículo</option>
                <option value="Toyota Hiace">Toyota Hiace</option>
                <option value="Volkswagen Saveiro">Volkswagen Saveiro</option>
                <option value="Fiat Uno Cargo">Fiat Uno Cargo</option>
              </select>
            </div>

            <div class="form-group" data-field="empleado" style="display:none;">
              <label for="mov-empleado">Empleado</label>
              <select id="mov-empleado" class="input">
                <option value="">Seleccionar empleado</option>
                <option value="Nico">Nico</option>
                <option value="Martín">Martín</option>
                <option value="Lucas">Lucas</option>
                <option value="Evelyn">Evelyn</option>
                <option value="Julieta">Julieta</option>
              </select>
            </div>

            <div class="form-group">
              <label for="mov-importe">Importe</label>
              <input id="mov-importe" type="number" min="0" class="input" placeholder="0" required />
            </div>

            <div class="form-group" data-field="banco" style="display:none;">
              <label for="mov-banco">Banco</label>
              <input id="mov-banco" class="input" type="text" placeholder="Nombre del banco" />
            </div>

            <div class="form-group" data-field="cheque" style="display:none;">
              <label for="mov-nro-cheque">N° Cheque</label>
              <input id="mov-nro-cheque" class="input" type="text" placeholder="Número de cheque" />
            </div>

            <div class="form-group">
              <label for="mov-observacion">Observación</label>
              <textarea id="mov-observacion" class="input textarea" rows="2" placeholder="Descripción del movimiento"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button id="modal-mov-cancel" class="btn btn-text">Cancelar</button>
          <button id="modal-mov-save" class="btn btn-primary">Registrar movimiento</button>
        </div>
      </div>
    </div>

    <!-- Toasts -->
    <div id="toast-container"></div>

    <!-- Overlay de carga -->
    <div id="loading-bar" class="loading-bar hidden">
      <div class="loading-line"></div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
